<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-BQGMFEFQJ1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-BQGMFEFQJ1');
    </script>
    
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>PredictionMarketPulse - Prediction Market Partnership Tracker & Regulatory Guide</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Track prediction market partnerships, understand regulatory structures (CFTC, NFA, FCM, DCM, DCO), and try our interactive trading simulation. Follow the evolving prediction markets ecosystem. Updated regularly with 56+ partnerships including Kalshi, Polymarket, Coinbase, and more."/>
    <meta name="keywords" content="prediction markets, Kalshi, Polymarket, event contracts, CFTC regulation, futures commission merchant, FCM, DCM, DCO, sports betting, regulated markets, prediction market partnerships"/>
    <meta name="author" content="Josh Pearl, Grant Hartman"/>
    <meta name="robots" content="index, follow"/>
    <meta name="googlebot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"/>
    <meta name="bingbot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"/>
    <link rel="canonical" href="https://predictionmarketpulse.com"/>
    
    <!-- Citation and Attribution for AI Engines -->
    <meta name="citation_title" content="PredictionMarketPulse - Prediction Market Partnership Tracker"/>
    <meta name="citation_publication_date" content="2024-12-01"/>
    <meta name="citation_online_date" content="2025-01-05"/>
    <meta name="citation_author" content="Josh Pearl"/>
    <meta name="citation_author" content="Grant Hartman"/>
    
    <!-- Favicons -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg"/>
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/>
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/>
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/>
    <link rel="manifest" href="/site.webmanifest"/>
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://predictionmarketpulse.com"/>
    <meta property="og:title" content="PredictionMarketPulse - Prediction Market Partnership Tracker"/>
    <meta property="og:description" content="Track prediction market partnerships and understand regulatory structures. Updated regularly with 56+ partnerships including Kalshi, Polymarket, Coinbase, and more."/>
    <meta property="og:site_name" content="PredictionMarketPulse"/>
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image"/>
    <meta name="twitter:url" content="https://predictionmarketpulse.com"/>
    <meta name="twitter:title" content="PredictionMarketPulse - Prediction Market Partnership Tracker"/>
    <meta name="twitter:description" content="Track prediction market partnerships and understand regulatory structures. Updated regularly with 56+ partnerships."/>
    
    <!-- Structured Data (JSON-LD) for Generative Engine Optimization -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "PredictionMarketPulse",
      "alternateName": "Prediction Market Pulse",
      "url": "https://predictionmarketpulse.com",
      "description": "Independent tracker and guide for prediction market partnerships and regulatory structures. Comprehensive database of 56+ partnerships in the CFTC-regulated prediction markets ecosystem including Kalshi, Polymarket, Coinbase, DraftKings, FanDuel, and more.",
      "about": {
        "@type": "Thing",
        "name": "Prediction Markets",
        "description": "CFTC-regulated event contracts and prediction markets in the United States, including partnerships, regulatory entities (FCM, DCM, DCO, IB, NFA), and market structure"
      },
      "mainEntity": {
        "@type": "Dataset",
        "name": "Prediction Market Partnerships Database",
        "description": "Comprehensive database tracking 56+ partnerships in the US prediction markets industry, including operational relationships, regulatory designations, and market structure details",
        "temporalCoverage": "2024/..",
        "spatialCoverage": "United States",
        "variableMeasured": ["Partnership Type", "Regulatory Structure", "FCM", "DCM", "DCO", "IB"],
        "includedInDataCatalog": {
          "@type": "DataCatalog",
          "name": "Prediction Markets Industry Data"
        }
      },
      "author": [
        {
          "@type": "Person",
          "name": "Josh Pearl",
          "description": "Over a decade of experience in regulated gambling spanning online horse racing, sports wagering, online casino, and paid fantasy sports. Previously led new-state launch efforts at Penn Interactive.",
          "jobTitle": "Regulated Gambling Consultant",
          "url": "https://www.linkedin.com/in/joshua-pearl-14b73627/",
          "knowsAbout": ["Prediction Markets", "Sports Betting Regulation", "CFTC Compliance", "Gaming Regulation"]
        },
        {
          "@type": "Person",
          "name": "Grant Hartman",
          "jobTitle": "Director of Client Engagement",
          "affiliation": {
            "@type": "Organization",
            "name": "Chariot Solutions",
            "url": "https://chariotsolutions.com"
          },
          "url": "https://www.linkedin.com/in/ghartman/",
          "knowsAbout": ["Regulated Technology", "Prediction Markets", "Sports Betting Software", "Gaming Technology"]
        }
      ],
      "keywords": "prediction markets, Kalshi, Polymarket, CFTC, event contracts, futures commission merchant, FCM, designated contract market, DCM, derivatives clearing organization, DCO, introducing broker, IB, National Futures Association, NFA, sports betting, regulated markets, Coinbase, DraftKings, FanDuel, Robinhood, ICE, CME",
      "inLanguage": "en-US",
      "datePublished": "2024-12-01",
      "dateModified": "2025-01-05",
      "publisher": {
        "@type": "Organization",
        "name": "PredictionMarketPulse"
      },
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://predictionmarketpulse.com/?search={search_term_string}",
        "query-input": "required name=search_term_string"
      }
    }
    </script>
    
    <!-- Additional FAQPage Schema for Common Questions -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [
        {
          "@type": "Question",
          "name": "What is a Futures Commission Merchant (FCM)?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "A Futures Commission Merchant (FCM) is an entity registered with the CFTC that accepts orders to buy or sell futures contracts and accepts money or other assets from customers to support such orders. In prediction markets, FCMs facilitate customer access to event contracts."
          }
        },
        {
          "@type": "Question",
          "name": "What is a Designated Contract Market (DCM)?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "A Designated Contract Market (DCM) is a CFTC-regulated exchange where futures contracts and event contracts can be traded. Examples include Kalshi, Crypto.com (CDNA), and ForecastEx."
          }
        },
        {
          "@type": "Question",
          "name": "Who regulates prediction markets in the United States?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "The Commodity Futures Trading Commission (CFTC) regulates prediction markets in the United States. Market participants must register with the National Futures Association (NFA) and comply with CFTC regulations."
          }
        },
        {
          "@type": "Question",
          "name": "What companies offer prediction markets?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Major companies offering or powering prediction markets include Kalshi, Polymarket, Coinbase, DraftKings, FanDuel, Robinhood, Interactive Brokers, Crypto.com (CDNA), and many others. PredictionMarketPulse tracks 56+ partnerships in this space."
          }
        }
      ]
    }
    </script>
    
    <script>
        // Initialize dark mode before page renders to prevent flash
        (function() {
            const darkMode = localStorage.getItem('darkMode');
            if (darkMode === 'true' || (!darkMode && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                document.documentElement.classList.add('dark');
            }
        })();
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet"/>
    <script src="https://cdn.tailwindcss.com?plugins=forms,typography"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: "#4338ca",
                        "primary-hover": "#3730a3",
                    },
                },
            },
        };
    </script>
    <style>
        /* ========================================
           EXPERT DARK MODE IMPLEMENTATION
           Using CSS Custom Properties (Design Tokens)
           ======================================== */
        
        :root {
            /* Light Mode Color Tokens */
            --color-bg-primary: #ffffff;
            --color-bg-secondary: #f8fafc;
            --color-bg-tertiary: #f1f5f9;
            --color-text-primary: #0f172a;
            --color-text-secondary: #475569;
            --color-text-tertiary: #64748b;
            --color-border-light: #e2e8f0;
            --color-border-medium: #cbd5e1;
            --color-surface: #ffffff;
            --color-surface-hover: #f8fafc;
            
            /* Brand Colors */
            --color-primary: #4338ca;
            --color-primary-light: #6366f1;
            --color-primary-dark: #3730a3;
            
            /* Shadows */
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1);
            --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1);
        }

        .dark {
            /* Dark Mode Color Tokens - Optimized for readability and eye comfort */
            --color-bg-primary: #0f172a;
            --color-bg-secondary: #1e293b;
            --color-bg-tertiary: #334155;
            --color-text-primary: #f8fafc;
            --color-text-secondary: #e2e8f0;
            --color-text-tertiary: #94a3b8;
            --color-border-light: #334155;
            --color-border-medium: #475569;
            --color-surface: #1e293b;
            --color-surface-hover: #334155;
            
            /* Adjusted brand colors for dark mode */
            --color-primary: #6366f1;
            --color-primary-light: #818cf8;
            --color-primary-dark: #4f46e5;
            
            /* Enhanced shadows for dark mode */
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.3);
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.4);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.5);
            --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.6);
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-10px); }
            to { opacity: 1; transform: translateX(0); }
        }

        /* Base Styles with smooth transitions */
        * {
            transition: background-color 0.2s ease, border-color 0.2s ease, color 0.2s ease, box-shadow 0.2s ease;
        }

        body {
            background-color: var(--color-bg-secondary);
            color: var(--color-text-primary);
            min-height: 100vh;
        }

        /* Subtle gradient overlay */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.03) 0%, rgba(168, 85, 247, 0.03) 100%);
        }

        .dark body::before {
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.08) 0%, rgba(168, 85, 247, 0.08) 100%);
        }
        
        .material-icons-outlined {
            font-size: 24px;
            line-height: 1;
        }
        
        .view-content {
            display: none;
        }

        .view-content.active {
            display: block;
            animation: fadeIn 0.5s ease-out;
        }

        .badge-Data { 
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            color: white;
            box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);
        }
        .badge-Operational { 
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            box-shadow: 0 2px 8px rgba(16, 185, 129, 0.3);
        }
        .badge-Investment { 
            background: linear-gradient(135deg, #a855f7 0%, #9333ea 100%);
            color: white;
            box-shadow: 0 2px 8px rgba(168, 85, 247, 0.3);
        }
        .badge-Other { 
            background: linear-gradient(135deg, #64748b 0%, #475569 100%);
            color: white;
            box-shadow: 0 2px 8px rgba(100, 116, 139, 0.3);
        }
        .badge-Government { 
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            color: white;
            box-shadow: 0 2px 8px rgba(245, 158, 11, 0.3);
        }
        .badge-Capital {
            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
            color: white;
            box-shadow: 0 2px 8px rgba(139, 92, 246, 0.3);
        }
        .badge-Acquisition {
            background: linear-gradient(135deg, #ec4899 0%, #db2777 100%);
            color: white;
            box-shadow: 0 2px 8px rgba(236, 72, 153, 0.3);
        }
        .badge-Marketing {
            background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
            color: white;
            box-shadow: 0 2px 8px rgba(249, 115, 22, 0.3);
        }
        
        /* Mobile badge adjustments */
        @media (max-width: 640px) {
            .badge-Data,
            .badge-Operational,
            .badge-Capital,
            .badge-Government,
            .badge-Investment,
            .badge-Other {
                font-size: 0.65rem;
                line-height: 1.2;
                max-width: 100%;
            }
        }

        .partnership-card {
            background: var(--color-surface);
            border: 1px solid var(--color-border-light);
            backdrop-filter: blur(10px);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            animation: slideIn 0.4s ease-out;
            box-shadow: var(--shadow-md);
        }

        .partnership-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-xl);
            border-color: var(--color-primary);
        }

        .regulatory-box {
            background: var(--color-bg-tertiary);
            border: 1px solid var(--color-border-light);
            position: relative;
            overflow: hidden;
        }

        .regulatory-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, var(--color-primary), var(--color-primary-light), var(--color-primary));
            background-size: 200% 100%;
            animation: shimmer 3s linear infinite;
        }

        @keyframes shimmer {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        .info-icon {
            background: linear-gradient(135deg, #818cf8 0%, #6366f1 100%);
            color: white;
            width: 24px;
            height: 24px;
            min-width: 24px;
            min-height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 6px;
            box-shadow: 0 2px 8px rgba(99, 102, 241, 0.3);
            font-size: 16px;
        }

        .announcement-link {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            font-size: 0.875rem;
            color: var(--color-primary);
            font-weight: 600;
            text-decoration: none;
            transition: all 0.2s ease;
        }

        .announcement-link:hover {
            color: var(--color-primary-light);
            gap: 0.5rem;
        }

        .announcement-link .material-icons-outlined {
            font-size: 16px;
        }

        .hero-gradient {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .dark .hero-gradient {
            background: linear-gradient(135deg, #818cf8 0%, #a78bfa 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .section-card {
            background: var(--color-surface);
            border: 1px solid var(--color-border-light);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-sm);
        }

        .section-card:hover {
            box-shadow: var(--shadow-md);
            border-color: var(--color-border-medium);
        }

        .section-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #667eea, #764ba2);
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }

        .section-card:hover::before {
            transform: scaleX(1);
        }

        .section-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.1);
        }

        .search-input:focus {
            outline: none;
            border-color: var(--color-primary-light);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        .filter-select:focus {
            outline: none;
            border-color: var(--color-primary-light);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        .nav-btn {
            position: relative;
            overflow: hidden;
            color: #64748b;
        }

        .dark .nav-btn {
            color: #cbd5e1;
        }

        .nav-btn::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            width: 0;
            height: 2px;
            background: var(--color-primary);
            transition: all 0.3s ease;
            transform: translateX(-50%);
        }

        .nav-btn.nav-active {
            background-color: rgba(99, 102, 241, 0.1);
        }

        .dark .nav-btn.nav-active {
            background-color: rgba(99, 102, 241, 0.15);
        }

        .nav-btn.text-primary::after {
            width: 80%;
        }

        .nav-btn-mobile {
            color: #64748b;
        }

        .dark .nav-btn-mobile {
            color: #cbd5e1;
        }

        .nav-btn-mobile.nav-active {
            background-color: rgba(99, 102, 241, 0.1);
        }

        .dark .nav-btn-mobile.nav-active {
            background-color: rgba(99, 102, 241, 0.15);
        }

        .nav-btn-mobile.text-primary {
            background-color: #eef2ff;
            color: var(--color-primary);
        }

        .dark .nav-btn-mobile.text-primary {
            background-color: rgba(67, 56, 202, 0.2);
            color: #a5b4fc;
        }

        .icon-badge {
            background: linear-gradient(135deg, var(--color-primary-light) 0%, var(--color-primary) 100%);
            box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
        }

        .dark .icon-badge {
            box-shadow: 0 4px 12px rgba(99, 102, 241, 0.5);
        }

        .reg-label {
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: #64748b;
            margin-bottom: 0.25rem;
        }

        .dark .reg-label {
            color: #94a3b8;
        }
    </style>
</head>
<body class="font-sans bg-slate-50 dark:bg-slate-900 dark:bg-slate-900 text-slate-700 dark:text-slate-200 transition-colors duration-200">
    
    <!-- Semantic Content for Generative Engines (Hidden) -->
    <div style="display: none;" aria-hidden="true">
        <h1>PredictionMarketPulse: Comprehensive Prediction Markets Partnership Tracker</h1>
        <p>Last Updated: January 2025 | 45+ Active Partnerships Tracked</p>
        
        <section>
            <h2>What is PredictionMarketPulse?</h2>
            <p>PredictionMarketPulse is an independent tracker documenting partnerships, regulatory structures, and market relationships in the US prediction markets ecosystem. The site explains CFTC-regulated event contracts and how companies like Kalshi, Polymarket, Coinbase, DraftKings, FanDuel, and Robinhood operate within the regulatory framework.</p>
        </section>
        
        <section>
            <h2>Key Regulatory Entities Explained</h2>
            <ul>
                <li><strong>CFTC (Commodity Futures Trading Commission):</strong> Primary federal regulator overseeing prediction markets and event contracts</li>
                <li><strong>NFA (National Futures Association):</strong> Self-regulatory organization for the futures industry</li>
                <li><strong>FCM (Futures Commission Merchant):</strong> Entity accepting orders and money to support futures/event contract trading</li>
                <li><strong>DCM (Designated Contract Market):</strong> CFTC-regulated exchange for trading contracts</li>
                <li><strong>DCO (Derivatives Clearing Organization):</strong> Entity providing clearing services for derivatives</li>
                <li><strong>IB (Introducing Broker):</strong> Entity introducing customers to FCMs or DCMs</li>
            </ul>
        </section>
        
        <section>
            <h2>Major Players in Prediction Markets (January 2025)</h2>
            <ul>
                <li><strong>Kalshi:</strong> CFTC-regulated prediction market platform, DCM and DCO, partners with Coinbase, PrizePicks, Robinhood, WeBull, Phantom, NHL, Google, CNN, CNBC, StockX</li>
                <li><strong>Polymarket:</strong> Acquired QCEX (DCM/DCO), partners with ICE, DraftKings, PrizePicks, Yahoo, UFC/TKO, X (Twitter), Chess.com</li>
                <li><strong>Coinbase:</strong> Launching prediction markets powered by Kalshi, acquiring The Clearing Company</li>
                <li><strong>DraftKings:</strong> Acquired Railbird, operates as IB, uses Polymarket for clearing</li>
                <li><strong>FanDuel:</strong> Partnership with CME, operates prediction markets through joint venture</li>
                <li><strong>Crypto.com (CDNA):</strong> DCM and DCO, partners with Underdog Fantasy, Fanatics, Trump Media, MyPrize, Hollywood.com</li>
                <li><strong>Robinhood:</strong> Acquiring MIAX Derivatives Exchange with SIG, partnering with Kalshi</li>
            </ul>
        </section>
        
        <section>
            <h2>Partnership Types</h2>
            <ul>
                <li><strong>Data/Marketing:</strong> Content partnerships, data distribution, branding (NHL, ESPN, Google, Yahoo)</li>
                <li><strong>Operational:</strong> Platform integrations, exchange access, clearing services</li>
                <li><strong>Capital/Collaboration:</strong> Strategic investments and business development (ICE/Polymarket)</li>
                <li><strong>Government Affairs:</strong> Industry coalitions and regulatory advocacy</li>
            </ul>
        </section>
        
        <section>
            <h2>Site Creators</h2>
            <p><strong>Josh Pearl:</strong> Over a decade in regulated gambling (horse racing, sports wagering, casino, fantasy sports). Former Penn Interactive executive leading new-state launches. Now consulting with regulated gambling companies.</p>
            <p><strong>Grant Hartman:</strong> Director of Client Engagement at Chariot Solutions, working with clients in gaming, sports betting, and prediction markets on complex regulated software projects.</p>
        </section>
        
        <section>
            <h2>Contact</h2>
            <p>Email: <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="65151700010c06110c0a0b0804170e00111510091600250208040c094b060a08">[email&#160;protected]</a></p>
            <p>The site welcomes feedback, partnership suggestions, and industry updates.</p>
        </section>
        
        <meta itemprop="lastReviewed" content="2025-01-05">
        <meta itemprop="citation" content="Source: PredictionMarketPulse.com - Independent prediction markets partnership tracker">
    </div>
    
    <!-- End Semantic Content -->

    <header class="bg-white/90 dark:bg-slate-800/90 backdrop-blur-lg border-b border-slate-200/50 dark:border-slate-700/50 sticky top-0 z-50 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center cursor-pointer group" onclick="switchView('terminology')">
                    <div class="icon-badge p-2.5 rounded-xl w-10 h-10 flex items-center justify-center transition-transform group-hover:scale-110">
                        <span class="material-icons-outlined text-white">trending_up</span>
                    </div>
                    <span class="ml-3 font-bold text-xl bg-gradient-to-r from-indigo-600 to-purple-600 dark:from-indigo-400 dark:to-purple-400 bg-clip-text text-transparent">PredictionMarketPulse</span>
                </div>

                <!-- Desktop Navigation -->
                <div class="hidden md:flex items-center space-x-1">
                    <button onclick="switchView('terminology')" id="nav-terminology" class="nav-btn flex items-center text-sm font-medium px-4 py-2 rounded-lg transition-all hover:bg-slate-50 dark:hover:bg-slate-800">
                        <span class="material-icons-outlined text-base mr-2">description</span>
                        Terminology
                    </button>
                    <button onclick="switchView('tracker')" id="nav-tracker" class="nav-btn flex items-center text-sm font-medium px-4 py-2 rounded-lg transition-all hover:bg-slate-50 dark:hover:bg-slate-800">
                        <span class="material-icons-outlined text-base mr-2">trending_up</span>
                        Tracker & Deals
                    </button>
                    <button onclick="switchView('simulation')" id="nav-simulation" class="nav-btn flex items-center text-sm font-medium px-4 py-2 rounded-lg transition-all hover:bg-slate-50 dark:hover:bg-slate-800">
                        <span class="material-icons-outlined text-base mr-2">sports_esports</span>
                        Trading Simulation
                    </button>
                    <button onclick="switchView('about')" id="nav-about" class="nav-btn flex items-center text-sm font-medium px-4 py-2 rounded-lg transition-all hover:bg-slate-50 dark:hover:bg-slate-800">
                        <span class="material-icons-outlined text-base mr-2">info</span>
                        About
                    </button>
                    <button onclick="switchView('contact')" id="nav-contact" class="nav-btn flex items-center text-sm font-medium px-4 py-2 rounded-lg transition-all hover:bg-slate-50 dark:hover:bg-slate-800">
                        <span class="material-icons-outlined text-base mr-2">email</span>
                        Contact
                    </button>
                    
                    <!-- Dark Mode Toggle -->
                    <button id="dark-mode-toggle" onclick="toggleDarkMode()" class="ml-2 p-2 rounded-lg hover:bg-slate-100 dark:bg-slate-700 dark:hover:bg-slate-800 transition-colors" title="Toggle dark mode">
                        <span class="material-icons-outlined text-xl dark:hidden">dark_mode</span>
                        <span class="material-icons-outlined text-xl hidden dark:inline">light_mode</span>
                    </button>
                </div>

                <!-- Mobile Menu Button & Dark Mode Toggle -->
                <div class="md:hidden flex items-center space-x-2">
                    <button id="dark-mode-toggle-mobile" onclick="toggleDarkMode()" class="w-10 h-10 flex items-center justify-center rounded-lg hover:bg-slate-100 dark:bg-slate-700 dark:hover:bg-slate-800 transition-colors" title="Toggle dark mode">
                        <span class="material-icons-outlined dark:hidden text-xl">dark_mode</span>
                        <span class="material-icons-outlined hidden dark:inline text-xl">light_mode</span>
                    </button>
                    <button id="mobile-menu-btn" class="w-10 h-10 flex items-center justify-center rounded-lg hover:bg-slate-100 dark:bg-slate-700 dark:hover:bg-slate-800 transition-colors" onclick="toggleMobileMenu()">
                        <span class="material-icons-outlined text-xl">menu</span>
                    </button>
                </div>
            </div>

            <!-- Mobile Navigation -->
            <div id="mobile-menu" class="hidden md:hidden pb-4 pt-2 bg-white dark:bg-slate-800">
                <div class="flex flex-col space-y-2">
                    <button onclick="switchView('terminology'); toggleMobileMenu()" class="nav-btn-mobile flex items-center text-sm font-medium text-slate-700 dark:text-slate-200 px-4 py-3 rounded-lg transition-all hover:bg-slate-50 dark:bg-slate-900 dark:hover:bg-slate-800 w-full text-left dark:text-slate-200">
                        <span class="material-icons-outlined text-base mr-3">description</span>
                        Terminology
                    </button>
                    <button onclick="switchView('tracker'); toggleMobileMenu()" class="nav-btn-mobile flex items-center text-sm font-medium text-slate-700 dark:text-slate-200 px-4 py-3 rounded-lg transition-all hover:bg-slate-50 dark:bg-slate-900 dark:hover:bg-slate-800 w-full text-left dark:text-slate-200">
                        <span class="material-icons-outlined text-base mr-3">trending_up</span>
                        Tracker & Deals
                    </button>
                    <button onclick="switchView('simulation'); toggleMobileMenu()" class="nav-btn-mobile flex items-center text-sm font-medium text-slate-700 dark:text-slate-200 px-4 py-3 rounded-lg transition-all hover:bg-slate-50 dark:bg-slate-900 dark:hover:bg-slate-800 w-full text-left dark:text-slate-200">
                        <span class="material-icons-outlined text-base mr-3">sports_esports</span>
                        Trading Simulation
                    </button>
                    <button onclick="switchView('about'); toggleMobileMenu()" class="nav-btn-mobile flex items-center text-sm font-medium text-slate-700 dark:text-slate-200 px-4 py-3 rounded-lg transition-all hover:bg-slate-50 dark:bg-slate-900 dark:hover:bg-slate-800 w-full text-left dark:text-slate-200">
                        <span class="material-icons-outlined text-base mr-3">info</span>
                        About
                    </button>
                    <button onclick="switchView('contact'); toggleMobileMenu()" class="nav-btn-mobile flex items-center text-sm font-medium text-slate-700 dark:text-slate-200 px-4 py-3 rounded-lg transition-all hover:bg-slate-50 dark:bg-slate-900 dark:hover:bg-slate-800 w-full text-left dark:text-slate-200">
                        <span class="material-icons-outlined text-base mr-3">email</span>
                        Contact
                    </button>
                </div>
            </div>
        </div>
    </header>

    <main class="py-8 sm:py-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            
            <div id="view-terminology" class="view-content active">
                <div class="mb-16 text-center">
                    <h1 class="text-4xl sm:text-5xl font-bold tracking-tight text-slate-900 dark:text-slate-100 mb-4">
                        Understanding the <span class="hero-gradient">Prediction Market Ecosystem</span>
                    </h1>
                    <p class="text-lg text-slate-700 dark:text-slate-100 max-w-3xl mx-auto">
                        Your guide to the US prediction markets ecosystem — understanding the regulatory framework, tracking the partnerships shaping the industry, and exploring how trading works.
                    </p>
                </div>

                <!-- Market Structure Diagram -->
                <div class="space-y-16 max-w-6xl mx-auto">
                    <!-- The Regulators Section -->
                    <section>
                        <div class="flex items-center gap-4 mb-8">
                            <div class="p-3 bg-indigo-100 dark:bg-indigo-900 rounded-2xl w-14 h-14 flex items-center justify-center">
                                <span class="material-icons-outlined text-indigo-600 dark:text-indigo-300 text-2xl">shield</span>
                            </div>
                            <h2 class="text-2xl sm:text-3xl font-bold text-slate-900 dark:text-slate-100">The Regulators</h2>
                        </div>
                        
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <!-- CFTC Card -->
                            <div class="bg-white dark:bg-slate-800 rounded-2xl p-8 border border-slate-200 dark:border-slate-700 shadow-sm">
                                <div class="flex items-start justify-between mb-4">
                                    <div>
                                        <h3 class="text-2xl sm:text-3xl font-bold text-slate-900 dark:text-slate-100 mb-2">CFTC</h3>
                                        <p class="text-indigo-600 dark:text-indigo-300 font-semibold">Commodity Futures Trading Commission</p>
                                    </div>
                                    <span class="material-icons-outlined text-indigo-200 dark:text-indigo-700 text-4xl">gavel</span>
                                </div>
                                
                                <div class="space-y-4 mt-6">
                                    <div>
                                        <h4 class="text-xs font-bold text-slate-600 dark:text-slate-200 uppercase tracking-wider mb-2">Role</h4>
                                        <p class="text-slate-700 dark:text-slate-100 leading-relaxed">The primary federal regulator of the U.S. derivatives markets, including futures, options on futures, and many swaps.</p>
                                    </div>
                                    <div>
                                        <h4 class="text-xs font-bold text-slate-600 dark:text-slate-200 uppercase tracking-wider mb-2">Responsibilities</h4>
                                        <p class="text-slate-700 dark:text-slate-100 leading-relaxed">Oversees trading to deter fraud, manipulation, abusive practices, and systemic risk, and to help ensure markets are fair, transparent, and financially sound.</p>
                                    </div>
                                </div>
                            </div>

                            <!-- NFA Card -->
                            <div class="bg-white dark:bg-slate-800 rounded-2xl p-8 border border-slate-200 dark:border-slate-700 shadow-sm">
                                <div class="flex items-start justify-between mb-4">
                                    <div>
                                        <h3 class="text-2xl sm:text-3xl font-bold text-slate-900 dark:text-slate-100 mb-2">NFA</h3>
                                        <p class="text-indigo-600 dark:text-indigo-300 font-semibold">National Futures Association</p>
                                    </div>
                                    <span class="material-icons-outlined text-slate-200 dark:text-slate-600 text-4xl">verified_user</span>
                                </div>
                                
                                <div class="space-y-4 mt-6">
                                    <div>
                                        <h4 class="text-xs font-bold text-slate-600 dark:text-slate-200 uppercase tracking-wider mb-2">Role</h4>
                                        <p class="text-slate-700 dark:text-slate-100 leading-relaxed">A CFTC-designated self-regulatory organization (SRO) for derivatives intermediaries such as FCMs, introducing brokers, commodity pool operators, and swap firms.</p>
                                    </div>
                                    <div>
                                        <h4 class="text-xs font-bold text-slate-600 dark:text-slate-200 uppercase tracking-wider mb-2">Responsibilities</h4>
                                        <p class="text-slate-700 dark:text-slate-100 leading-relaxed">Sets and enforces rules for its members, conducts examinations and audits, monitors financial and compliance requirements, and runs registration and background-screening functions for many CFTC registrants.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Market Participants Section -->
                    <section>
                        <div class="flex items-center gap-4 mb-8">
                            <div class="p-3 bg-purple-100 dark:bg-purple-900 rounded-2xl w-14 h-14 flex items-center justify-center">
                                <span class="material-icons-outlined text-purple-600 dark:text-purple-300 text-2xl">storefront</span>
                            </div>
                            <h2 class="text-2xl sm:text-3xl font-bold text-slate-900 dark:text-slate-100 break-words">Market Participants/Designations</h2>
                        </div>

                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <!-- FCM Card -->
                            <div class="bg-white dark:bg-slate-800 rounded-2xl p-8 border border-slate-200 dark:border-slate-700 shadow-sm flex flex-col">
                                <div class="flex items-start justify-between mb-4">
                                    <div class="flex-1">
                                        <h3 class="text-2xl sm:text-3xl font-bold text-slate-900 dark:text-slate-100 mb-2">FCM</h3>
                                        <p class="text-indigo-600 dark:text-indigo-300 font-semibold">Futures Commission Merchant</p>
                                    </div>
                                    <span class="px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-200 text-sm font-semibold rounded-lg whitespace-nowrap">CFTC & NFA Regulated</span>
                                </div>
                                
                                <p class="text-slate-700 dark:text-slate-100 leading-relaxed mt-6 mb-6 flex-grow">A firm that facilitates customer access to futures and options markets (and certain swaps or event contracts), accepts customer funds to margin those positions, and is subject to oversight by both the CFTC and NFA.</p>
                                
                                <div>
                                    <h4 class="text-xs font-bold text-slate-600 dark:text-slate-200 uppercase tracking-wider mb-3">Examples</h4>
                                    <p class="text-slate-800 dark:text-slate-100 bg-slate-50 dark:bg-slate-900 p-3 rounded-lg">PrizePicks (Performance Predictions II), Robinhood Derivatives</p>
                                </div>
                            </div>

                            <!-- DCM Card -->
                            <div class="bg-white dark:bg-slate-800 rounded-2xl p-8 border border-slate-200 dark:border-slate-700 shadow-sm flex flex-col">
                                <div class="flex items-start justify-between mb-4">
                                    <div class="flex-1">
                                        <h3 class="text-2xl sm:text-3xl font-bold text-slate-900 dark:text-slate-100 mb-2">DCM</h3>
                                        <p class="text-indigo-600 dark:text-indigo-300 font-semibold">Designated Contract Market</p>
                                    </div>
                                    <span class="px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-200 text-sm font-semibold rounded-lg whitespace-nowrap">CFTC Regulated</span>
                                </div>
                                
                                <p class="text-slate-700 dark:text-slate-100 leading-relaxed mt-6 mb-6 flex-grow">A CFTC-regulated exchange (board of trade) where standardized futures, options on futures, and certain swaps or event contracts are listed and traded.</p>
                                
                                <div>
                                    <h4 class="text-xs font-bold text-slate-600 dark:text-slate-200 uppercase tracking-wider mb-3">Examples</h4>
                                    <p class="text-slate-800 dark:text-slate-100 bg-slate-50 dark:bg-slate-900 p-3 rounded-lg">CME, Kalshi, Polymarket US (QCX), Crypto.com (CDNA)</p>
                                </div>
                            </div>

                            <!-- DCO Card -->
                            <div class="bg-white dark:bg-slate-800 rounded-2xl p-8 border border-slate-200 dark:border-slate-700 shadow-sm flex flex-col">
                                <div class="flex items-start justify-between mb-4">
                                    <div class="flex-1">
                                        <h3 class="text-2xl sm:text-3xl font-bold text-slate-900 dark:text-slate-100 mb-2">DCO</h3>
                                        <p class="text-indigo-600 dark:text-indigo-300 font-semibold">Derivatives Clearing Organization</p>
                                    </div>
                                    <span class="px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-200 text-sm font-semibold rounded-lg whitespace-nowrap">CFTC Regulated</span>
                                </div>
                                
                                <p class="text-slate-700 dark:text-slate-100 leading-relaxed mt-6 mb-6 flex-grow">A CFTC-registered clearinghouse that clears and settles trades—often those executed on DCMs—and manages the associated margin and counterparty risk.</p>
                                
                                <div>
                                    <h4 class="text-xs font-bold text-slate-600 dark:text-slate-200 uppercase tracking-wider mb-3">Examples</h4>
                                    <p class="text-slate-800 dark:text-slate-100 bg-slate-50 dark:bg-slate-900 p-3 rounded-lg">CME Clearing, Kalshi Klear, Polymarket Clearing (QC Clearing)</p>
                                </div>
                            </div>

                            <!-- IB Card -->
                            <div class="bg-white dark:bg-slate-800 rounded-2xl p-8 border border-slate-200 dark:border-slate-700 shadow-sm flex flex-col">
                                <div class="flex items-start justify-between mb-4">
                                    <div class="flex-1">
                                        <h3 class="text-2xl sm:text-3xl font-bold text-slate-900 dark:text-slate-100 mb-2">IB</h3>
                                        <p class="text-indigo-600 dark:text-indigo-300 font-semibold">Introducing Broker</p>
                                    </div>
                                    <span class="px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-200 text-sm font-semibold rounded-lg whitespace-nowrap">NFA Registered</span>
                                </div>
                                
                                <p class="text-slate-700 dark:text-slate-100 leading-relaxed mt-6 mb-6 flex-grow">A CFTC-registered intermediary that solicits or accepts customer orders but does not hold customer funds; instead, it "introduces" those accounts to an FCM that carries the positions.</p>
                                
                                <div>
                                    <h4 class="text-xs font-bold text-slate-600 dark:text-slate-200 uppercase tracking-wider mb-3">Examples</h4>
                                    <p class="text-slate-800 dark:text-slate-100 bg-slate-50 dark:bg-slate-900 p-3 rounded-lg">Fanatics (via Paragon Global Markets), DraftKings Predictions</p>
                                </div>
                            </div>
                        </div>
                    </section>
                <section class="mb-16">
                    <div class="bg-gradient-to-br from-white to-slate-50 dark:from-slate-800 dark:to-slate-900 rounded-3xl p-8 md:p-12 border border-slate-200 dark:border-slate-700 shadow-xl relative overflow-hidden">
                        <!-- Decorative background elements -->
                        <div class="absolute top-0 right-0 w-96 h-96 bg-gradient-to-br from-indigo-100/30 to-purple-100/30 rounded-full blur-3xl -z-0"></div>
                        <div class="absolute bottom-0 left-0 w-96 h-96 bg-gradient-to-tr from-blue-100/30 to-cyan-100/30 rounded-full blur-3xl -z-0"></div>
                        
                        <div class="relative z-10">
                            <div class="text-center mb-8">
                                <h2 class="text-2xl sm:text-3xl font-bold text-slate-900 dark:text-slate-100 mb-2">Market Structure Flow</h2>
                                <p class="text-slate-700 dark:text-slate-100">How trades move through the prediction markets ecosystem</p>
                            </div>
                            
                            <div class="max-w-6xl mx-auto">
                                <!-- Modern Card-Based Flow -->
                                <div class="flex flex-col md:flex-row items-center justify-center gap-6 md:gap-1 xl:gap-3 overflow-x-auto pb-4">
                                    
                                    <!-- Customer Node -->
                                    <div class="flex flex-col items-center flex-shrink-0">
                                        <div class="bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-4 border-2 border-slate-200 dark:border-slate-700 hover:border-slate-300 transition-all duration-300 hover:shadow-xl group w-36 md:w-40 min-h-[140px]">
                                            <div class="flex flex-col items-center">
                                                <div class="w-12 h-12 bg-gradient-to-br from-slate-400 to-slate-600 rounded-2xl flex items-center justify-center mb-2 group-hover:scale-110 transition-transform duration-300 shadow-lg">
                                                    <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                                                    </svg>
                                                </div>
                                                <h3 class="font-bold text-slate-900 dark:text-slate-100 text-center mb-1 text-xs">Customer</h3>
                                                <p class="text-xs text-slate-600 dark:text-slate-300 text-center text-[10px]">Individual Trader</p>
                                            </div>
                                        </div>
                                        <div class="text-xs text-slate-500 dark:text-slate-400 mt-2 font-medium">START</div>
                                    </div>
                                    
                                    <!-- Arrow 1 -->
                                    <div class="hidden md:flex items-center flex-shrink-0">
                                        <div class="flex items-center">
                                            <div class="h-0.5 w-4 bg-gradient-to-r from-slate-300 to-indigo-400"></div>
                                            <div class="w-0 h-0 border-t-4 border-t-transparent border-b-4 border-b-transparent border-l-8 border-l-indigo-400"></div>
                                        </div>
                                    </div>
                                    <div class="md:hidden flex flex-col items-center">
                                        <div class="w-0.5 h-8 bg-gradient-to-b from-slate-300 to-indigo-400"></div>
                                        <div class="w-0 h-0 border-l-4 border-l-transparent border-r-4 border-r-transparent border-t-8 border-t-indigo-400"></div>
                                    </div>
                                    
                                    <!-- IB/FCM/TSP Node -->
                                    <div class="flex flex-col items-center flex-shrink-0">
                                        <div class="bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-4 border-2 border-indigo-300 hover:border-indigo-400 transition-all duration-300 hover:shadow-xl group w-36 md:w-40 min-h-[140px] relative overflow-hidden">
                                            <div class="absolute inset-0 bg-gradient-to-br from-indigo-50 to-purple-50 dark:from-indigo-900/20 dark:to-purple-900/20 opacity-50"></div>
                                            <div class="relative flex flex-col items-center">
                                                <div class="w-12 h-12 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl flex items-center justify-center mb-2 group-hover:scale-110 transition-transform duration-300 shadow-lg">
                                                    <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4" />
                                                    </svg>
                                                </div>
                                                <h3 class="font-bold text-slate-900 dark:text-slate-100 text-center mb-1 text-xs">IB / Non-Clearing FCM / TSP</h3>
                                                <p class="text-xs text-slate-700 dark:text-slate-100 text-center leading-tight text-[10px]">Access Point</p>
                                            </div>
                                        </div>
                                        <div class="text-xs text-indigo-600 dark:text-indigo-300 mt-2 font-semibold">STEP 1</div>
                                    </div>
                                    
                                    <!-- Arrow 2 -->
                                    <div class="hidden md:flex items-center flex-shrink-0">
                                        <div class="flex items-center">
                                            <div class="h-0.5 w-4 bg-gradient-to-r from-indigo-400 to-emerald-400"></div>
                                            <div class="w-0 h-0 border-t-4 border-t-transparent border-b-4 border-b-transparent border-l-8 border-l-emerald-400"></div>
                                        </div>
                                    </div>
                                    <div class="md:hidden flex flex-col items-center">
                                        <div class="w-0.5 h-8 bg-gradient-to-b from-indigo-400 to-emerald-400"></div>
                                        <div class="w-0 h-0 border-l-4 border-l-transparent border-r-4 border-r-transparent border-t-8 border-t-emerald-400"></div>
                                    </div>
                                    
                                    <!-- FCM Node -->
                                    <div class="flex flex-col items-center flex-shrink-0">
                                        <div class="bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-4 border-2 border-emerald-300 hover:border-emerald-400 transition-all duration-300 hover:shadow-xl group w-36 md:w-40 min-h-[140px] relative overflow-hidden">
                                            <div class="absolute inset-0 bg-gradient-to-br from-emerald-50 to-teal-50 dark:from-emerald-900/20 dark:to-teal-900/20 opacity-50"></div>
                                            <div class="relative flex flex-col items-center">
                                                <div class="w-12 h-12 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-2xl flex items-center justify-center mb-2 group-hover:scale-110 transition-transform duration-300 shadow-lg">
                                                    <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
                                                    </svg>
                                                </div>
                                                <h3 class="font-bold text-slate-900 dark:text-slate-100 text-center mb-1 text-xs">FCM</h3>
                                                <p class="text-xs text-slate-700 dark:text-slate-100 text-center leading-tight text-[10px]">Clearing & Custody</p>
                                            </div>
                                        </div>
                                        <div class="text-xs text-emerald-600 dark:text-emerald-300 mt-2 font-semibold">STEP 2</div>
                                    </div>
                                    
                                    <!-- Arrow 3 -->
                                    <div class="hidden md:flex items-center flex-shrink-0">
                                        <div class="flex items-center">
                                            <div class="h-0.5 w-4 bg-gradient-to-r from-emerald-400 to-blue-400"></div>
                                            <div class="w-0 h-0 border-t-4 border-t-transparent border-b-4 border-b-transparent border-l-8 border-l-blue-400"></div>
                                        </div>
                                    </div>
                                    <div class="md:hidden flex flex-col items-center">
                                        <div class="w-0.5 h-8 bg-gradient-to-b from-emerald-400 to-blue-400"></div>
                                        <div class="w-0 h-0 border-l-4 border-l-transparent border-r-4 border-r-transparent border-t-8 border-t-blue-400"></div>
                                    </div>
                                    
                                    <!-- DCM Node -->
                                    <div class="flex flex-col items-center flex-shrink-0">
                                        <div class="bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-4 border-2 border-blue-300 hover:border-blue-400 transition-all duration-300 hover:shadow-xl group w-36 md:w-40 min-h-[140px] relative overflow-hidden">
                                            <div class="absolute inset-0 bg-gradient-to-br from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20 opacity-50"></div>
                                            <div class="relative flex flex-col items-center">
                                                <div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-cyan-600 rounded-2xl flex items-center justify-center mb-2 group-hover:scale-110 transition-transform duration-300 shadow-lg">
                                                    <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" />
                                                    </svg>
                                                </div>
                                                <h3 class="font-bold text-slate-900 dark:text-slate-100 text-center mb-1 text-xs">DCM</h3>
                                                <p class="text-xs text-slate-700 dark:text-slate-100 text-center leading-tight text-[10px]">Exchange/Market</p>
                                            </div>
                                        </div>
                                        <div class="text-xs text-blue-600 dark:text-blue-300 mt-2 font-semibold">STEP 3</div>
                                    </div>
                                    
                                    <!-- Arrow 4 -->
                                    <div class="hidden md:flex items-center flex-shrink-0">
                                        <div class="flex items-center">
                                            <div class="h-0.5 w-4 bg-gradient-to-r from-blue-400 to-purple-400"></div>
                                            <div class="w-0 h-0 border-t-4 border-t-transparent border-b-4 border-b-transparent border-l-8 border-l-purple-400"></div>
                                        </div>
                                    </div>
                                    <div class="md:hidden flex flex-col items-center">
                                        <div class="w-0.5 h-8 bg-gradient-to-b from-blue-400 to-purple-400"></div>
                                        <div class="w-0 h-0 border-l-4 border-l-transparent border-r-4 border-r-transparent border-t-8 border-t-purple-400"></div>
                                    </div>
                                    
                                    <!-- DCO Node -->
                                    <div class="flex flex-col items-center flex-shrink-0">
                                        <div class="bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-4 border-2 border-purple-300 hover:border-purple-400 transition-all duration-300 hover:shadow-xl group w-36 md:w-40 min-h-[140px] relative overflow-hidden">
                                            <div class="absolute inset-0 bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 opacity-50"></div>
                                            <div class="relative flex flex-col items-center">
                                                <div class="w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-600 rounded-2xl flex items-center justify-center mb-2 group-hover:scale-110 transition-transform duration-300 shadow-lg">
                                                    <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                                                    </svg>
                                                </div>
                                                <h3 class="font-bold text-slate-900 dark:text-slate-100 text-center mb-1 text-xs">DCO</h3>
                                                <p class="text-xs text-slate-700 dark:text-slate-100 text-center leading-tight text-[10px]">Settlement</p>
                                            </div>
                                        </div>
                                        <div class="text-xs text-purple-600 dark:text-purple-300 mt-2 font-semibold">STEP 4</div>
                                    </div>
                                    
                                </div>
                                
                                <!-- Info Cards Below -->
                                <div class="mt-12 grid grid-cols-1 md:grid-cols-3 gap-4">
                                    <div class="bg-white/60 dark:bg-slate-800/90 backdrop-blur-sm rounded-xl p-4 border border-slate-200 dark:border-slate-700">
                                        <div class="flex items-start gap-3">
                                            <div class="w-8 h-8 min-w-8 min-h-8 bg-indigo-100 dark:bg-indigo-900 rounded-lg flex items-center justify-center flex-shrink-0 mt-0.5">
                                                <span class="text-indigo-600 dark:text-indigo-300 font-bold text-sm">IB</span>
                                            </div>
                                            <div>
                                                <h4 class="font-semibold text-slate-900 dark:text-slate-100 text-sm mb-1">Introducing Broker</h4>
                                                <p class="text-xs text-slate-700 dark:text-slate-100 leading-relaxed">Solicits customers but doesn't hold funds</p>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="bg-white/60 dark:bg-slate-800/90 backdrop-blur-sm rounded-xl p-4 border border-slate-200 dark:border-slate-700">
                                        <div class="flex items-start gap-3">
                                            <div class="w-8 h-8 min-w-8 min-h-8 bg-emerald-100 dark:bg-emerald-900 rounded-lg flex items-center justify-center flex-shrink-0 mt-0.5">
                                                <span class="text-emerald-600 dark:text-emerald-300 font-bold text-xs">FCM</span>
                                            </div>
                                            <div>
                                                <h4 class="font-semibold text-slate-900 dark:text-slate-100 text-sm mb-1">Futures Commission Merchant</h4>
                                                <p class="text-xs text-slate-700 dark:text-slate-100 leading-relaxed">Accepts and holds customer funds for trading</p>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="bg-white/60 dark:bg-slate-800/90 backdrop-blur-sm rounded-xl p-4 border border-slate-200 dark:border-slate-700">
                                        <div class="flex items-start gap-3">
                                            <div class="w-8 h-8 min-w-8 min-h-8 bg-slate-100 dark:bg-slate-700 rounded-lg flex items-center justify-center flex-shrink-0 mt-0.5">
                                                <span class="text-slate-700 dark:text-slate-100 font-bold text-xs">TSP</span>
                                            </div>
                                            <div>
                                                <h4 class="font-semibold text-slate-900 dark:text-slate-100 text-sm mb-1">Tech Service Provider</h4>
                                                <p class="text-xs text-slate-700 dark:text-slate-100 leading-relaxed">Provides technology platform and services</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Bottom Note -->
                                <div class="mt-8 bg-gradient-to-r from-slate-50 to-indigo-50 dark:from-slate-800 dark:to-indigo-950 rounded-xl p-6 border border-slate-200 dark:border-slate-700">
                                    <div class="flex items-start gap-4">
                                        <div class="w-10 h-10 min-w-10 min-h-10 bg-indigo-100 dark:bg-indigo-900 rounded-xl flex items-center justify-center flex-shrink-0">
                                            <svg class="w-5 h-5 text-indigo-600 dark:text-indigo-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                                            </svg>
                                        </div>
                                        <div>
                                            <h4 class="font-semibold text-slate-900 dark:text-slate-100 mb-2">Note on Multi-Role Entities</h4>
                                            <p class="text-sm text-slate-700 dark:text-slate-100 leading-relaxed">Some organizations may serve multiple roles simultaneously. For example, CME functions as both an FCM, DCM, and DCO. The flow shown represents the logical progression of a trade through the system, even when roles are consolidated within a single entity.</p>
                                            <p class="text-sm text-slate-700 dark:text-slate-100 leading-relaxed mt-2">In certain prediction market structures, introducing intermediaries may operate without a separate FCM because customer clearing is handled directly by the exchange or its clearing organization.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                    <!-- Useful Links Section -->

                    <section class="mt-16">
                        <div class="flex items-center gap-4 mb-8">
                            <div class="p-3 bg-emerald-100 dark:bg-emerald-900 rounded-2xl w-14 h-14 flex items-center justify-center">
                                <span class="material-icons-outlined text-emerald-600 dark:text-emerald-300 text-2xl">link</span>
                            </div>
                            <h2 class="text-2xl sm:text-3xl font-bold text-slate-900 dark:text-slate-100">Useful Links</h2>
                        </div>
                        
                        <div class="bg-white dark:bg-slate-800 rounded-2xl p-8 border border-slate-200 dark:border-slate-700 shadow-sm">
                            <div class="space-y-4">
                                <div class="flex items-start gap-3">
                                    <span class="material-icons-outlined text-indigo-500 text-xl mt-0.5">open_in_new</span>
                                    <div>
                                        <h3 class="font-semibold text-slate-900 dark:text-slate-100 mb-1">Search NFA Filings</h3>
                                        <a href="https://www.nfa.futures.org/basicnet/" target="_blank" class="text-indigo-600 dark:text-indigo-300 hover:text-indigo-700 text-sm break-all">https://www.nfa.futures.org/basicnet/</a>
                                    </div>
                                </div>
                                
                                <div class="border-t border-slate-100 dark:border-slate-700"></div>
                                
                                <div class="flex items-start gap-3">
                                    <span class="material-icons-outlined text-indigo-500 text-xl mt-0.5">open_in_new</span>
                                    <div>
                                        <h3 class="font-semibold text-slate-900 dark:text-slate-100 mb-1">Search CFTC Filing Status (DCM and DCO Registrations)</h3>
                                        <a href="https://www.cftc.gov/IndustryOversight/IndustryFilings/TradingOrganizations?dir=ASC&col=Status" target="_blank" class="text-indigo-600 dark:text-indigo-300 hover:text-indigo-700 text-sm break-all">https://www.cftc.gov/IndustryOversight/IndustryFilings/TradingOrganizations</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
            </div>

            <div id="view-tracker" class="view-content">
                <div class="mb-10">
                    <h1 class="text-4xl font-bold text-slate-900 dark:text-slate-100 mb-3">Partnership <span class="hero-gradient">Tracker</span></h1>
                    <p class="text-slate-700 dark:text-slate-100 mb-8 text-lg">Detailed breakdown of market structure relationships.</p>
                    
                    <div class="flex gap-4 items-center flex-wrap">
                        <select id="typeFilter" onchange="filterPartnerships()" class="filter-select px-5 py-3 border-2 border-slate-200 dark:border-slate-700 rounded-xl bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 text-sm font-medium shadow-sm hover:border-indigo-300 transition-all focus:ring-2 focus:ring-indigo-500">
                            <option value="">All Types</option>
                            <option value="Acquisition">Acquisition</option>
                            <option value="Capital/Collaboration">Capital/Collaboration</option>
                            <option value="Capital/Marketing">Capital/Marketing</option>
                            <option value="Data/Integration">Data/Integration</option>
                            <option value="Data/Marketing">Data/Marketing</option>
                            <option value="Data/Marketing/Sponsorship">Data/Marketing/Sponsorship</option>
                            <option value="Government Affairs">Government Affairs</option>
                            <option value="Marketing/Athlete Sponsorship">Marketing/Athlete Sponsorship</option>
                            <option value="Operational">Operational</option>
                            <option value="Operational/B2B">Operational/B2B</option>
                            <option value="Operational/Data">Operational/Data</option>
                            <option value="Other">Other</option>
                        </select>
                        
                        <input type="text" id="searchInput" oninput="filterPartnerships()" placeholder="Search partnerships..." class="search-input flex-1 min-w-[200px] px-5 py-3 border-2 border-slate-200 dark:border-slate-700 rounded-xl bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 text-sm shadow-sm hover:border-indigo-300 transition-all">
                    </div>
                </div>

                <div id="tracker-content" class="space-y-6"></div>
            </div>

            <div id="view-simulation" class="view-content">
                <div class="mb-6 hidden md:block">
                    <h1 class="text-4xl font-bold text-slate-900 dark:text-white mb-3">
                        Trading <span class="hero-gradient">Simulation</span>
                    </h1>
                    <p class="text-slate-600 dark:text-slate-400 text-lg">
                        Learn how prediction markets work by trading on a simple question: Will it rain tomorrow?
                    </p>
                </div>
                <div style="max-width:500px;margin:0 auto;">
                    <iframe id="sim-iframe" src="simulation.html" style="width:100%;border:none;border-radius:16px;" title="Weather Trader Simulation"></iframe>
                </div>
                <script>
                window.addEventListener('message',function(e){
                    if(e.data&&e.data.type==='sim-height'){
                        document.getElementById('sim-iframe').style.height=e.data.height+'px';
                    }
                    if(e.data&&e.data.type==='sim-scroll-top'&&window.innerWidth<=768){
                        document.getElementById('sim-iframe').scrollIntoView({behavior:'smooth'});
                    }
                });
                document.getElementById('sim-iframe').addEventListener('load',function(){
                    var isDark = document.documentElement.classList.contains('dark');
                    this.contentWindow.postMessage({type:'sim-theme', dark: isDark}, '*');
                });
                </script>
            </div>

            <div id="view-about" class="view-content">
                <div class="text-center mb-12">
                    <h1 class="text-4xl sm:text-6xl font-bold tracking-tight text-slate-900 dark:text-slate-100 mb-6">
                        About <span class="hero-gradient">PredictionMarketPulse</span>
                    </h1>
                </div>
                
                <div class="max-w-3xl mx-auto space-y-8">
                    <!-- Main Description -->
                    <div class="section-card rounded-2xl shadow-xl p-10 border border-slate-200 dark:border-slate-700">
                        <p class="text-slate-700 dark:text-slate-100 leading-relaxed mb-6 text-lg">
                            This site is an independent project that explains the structure and partnerships behind prediction markets—how they're organized and who's involved.
                        </p>
                        <p class="text-slate-700 dark:text-slate-100 leading-relaxed mb-6 text-lg">
                            As the space has evolved, we found the news hard to follow and the underlying relationships even harder to untangle. This site brings those pieces together in one place for anyone looking for clarity.
                        </p>
                        <p class="text-slate-700 dark:text-slate-100 leading-relaxed text-lg">
                            This site will be regularly updated as new deals are announced to keep the information current and comprehensive.
                        </p>
                    </div>

                    <!-- About the Creators -->
                    <div class="section-card rounded-2xl shadow-xl p-10 border border-slate-200 dark:border-slate-700">
                        <h2 class="text-2xl font-bold text-slate-900 dark:text-slate-100 mb-6">About the Creators</h2>
                        
                        <!-- Josh Pearl -->
                        <div class="mb-8">
                            <h3 class="text-xl font-bold text-slate-900 dark:text-slate-100 mb-3">Josh Pearl</h3>
                            <p class="text-slate-700 dark:text-slate-100 leading-relaxed mb-4">
                                Josh has spent over a decade working in regulated gambling, spanning online horse racing, sports wagering, online casino, and paid fantasy sports. He previously led new-state launch efforts at Penn Interactive, working closely on legislative, regulatory, and operational considerations.
                            </p>
                            <p class="text-slate-700 dark:text-slate-100 leading-relaxed mb-4">
                                He now consults with regulated gambling companies across a wide range of initiatives. Josh has followed prediction markets closely since early 2025 out of personal interest and has no business affiliation with any entities participating in this space.
                            </p>
                            <a href="https://www.linkedin.com/in/joshua-pearl-14b73627/" target="_blank" rel="noopener noreferrer" class="inline-flex items-center text-indigo-600 dark:text-indigo-400 hover:underline text-sm font-medium">
                                <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/>
                                </svg>
                                LinkedIn Profile
                            </a>
                        </div>

                        <!-- Grant Hartman -->
                        <div class="pt-8 border-t border-slate-200 dark:border-slate-700">
                            <h3 class="text-xl font-bold text-slate-900 dark:text-slate-100 mb-3">Grant Hartman</h3>
                            <p class="text-slate-700 dark:text-slate-100 leading-relaxed mb-4">
                                Grant works as Director of Client Engagement at <a href="https://chariotsolutions.com" target="_blank" rel="noopener noreferrer" class="text-indigo-600 dark:text-indigo-400 hover:underline">Chariot Solutions</a>, where he works closely with clients building software in complex, highly regulated markets, including gaming, sports betting, and prediction markets. Through this work, he's spent years close to projects shaped by regulation, incentives, and technology.
                            </p>
                            <a href="https://www.linkedin.com/in/ghartman/" target="_blank" rel="noopener noreferrer" class="inline-flex items-center text-indigo-600 dark:text-indigo-400 hover:underline text-sm font-medium">
                                <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/>
                                </svg>
                                LinkedIn Profile
                            </a>
                        </div>
                    </div>
                </div>
                    </p>
                </div>
            </div>

            <div id="view-contact" class="view-content">
                <div class="text-center mb-12">
                    <h1 class="text-4xl sm:text-6xl font-bold tracking-tight text-slate-900 dark:text-slate-100 mb-6">
                        Get in <span class="hero-gradient">Touch</span>
                    </h1>
                </div>
                
                <div class="max-w-2xl mx-auto">
                    <div class="section-card rounded-2xl shadow-xl p-10 border border-slate-200 dark:border-slate-700">
                        <div class="text-center mb-8">
                            <div class="inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl mb-6 shadow-lg">
                                <span class="material-icons-outlined text-white text-4xl">email</span>
                            </div>
                        </div>
                        
                        <p class="text-slate-700 dark:text-slate-100 leading-relaxed mb-8 text-lg text-center">
                            We welcome feedback, suggestions for partnerships to add to our tracker, or just a friendly hello. We'd love to hear from you!
                        </p>
                        
                        <!-- Netlify Form -->
                        <form name="contact" method="POST" data-netlify="true" netlify-honeypot="bot-field" action="/success.html" class="space-y-6">
                            <!-- Hidden fields for Netlify -->
                            <input type="hidden" name="form-name" value="contact" />
                            
                            <!-- Honeypot for spam protection -->
                            <p class="hidden">
                                <label>Don't fill this out if you're human: <input name="bot-field" /></label>
                            </p>
                            
                            <!-- Name Field -->
                            <div>
                                <label for="name" class="block text-sm font-semibold text-slate-700 dark:text-slate-100 mb-2">
                                    Name <span class="text-red-500">*</span>
                                </label>
                                <input 
                                    type="text" 
                                    id="name" 
                                    name="name" 
                                    required
                                    class="w-full px-4 py-3 border-2 border-slate-200 dark:border-slate-700 rounded-xl bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500 transition-all"
                                    placeholder="Your name"
                                />
                            </div>
                            
                            <!-- Email Field -->
                            <div>
                                <label for="email" class="block text-sm font-semibold text-slate-700 dark:text-slate-100 mb-2">
                                    Email <span class="text-red-500">*</span>
                                </label>
                                <input 
                                    type="email" 
                                    id="email" 
                                    name="email" 
                                    required
                                    class="w-full px-4 py-3 border-2 border-slate-200 dark:border-slate-700 rounded-xl bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500 transition-all"
                                    placeholder="your@email.com"
                                />
                            </div>
                            
                            <!-- Subject Field -->
                            <div>
                                <label for="subject" class="block text-sm font-semibold text-slate-700 dark:text-slate-100 mb-2">
                                    Subject
                                </label>
                                <input 
                                    type="text" 
                                    id="subject" 
                                    name="subject"
                                    class="w-full px-4 py-3 border-2 border-slate-200 dark:border-slate-700 rounded-xl bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500 transition-all"
                                    placeholder="What's this about?"
                                />
                            </div>
                            
                            <!-- Message Field -->
                            <div>
                                <label for="message" class="block text-sm font-semibold text-slate-700 dark:text-slate-100 mb-2">
                                    Message <span class="text-red-500">*</span>
                                </label>
                                <textarea 
                                    id="message" 
                                    name="message" 
                                    rows="6"
                                    required
                                    class="w-full px-4 py-3 border-2 border-slate-200 dark:border-slate-700 rounded-xl bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500 transition-all resize-none"
                                    placeholder="Your message..."
                                ></textarea>
                            </div>
                            
                            <!-- Submit Button -->
                            <div class="text-center">
                                <button 
                                    type="submit"
                                    class="inline-flex items-center px-8 py-4 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-105"
                                >
                                    <span class="material-icons-outlined mr-2">send</span>
                                    Send Message
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
        const SHEET_CSV_URL = 'https://docs.google.com/spreadsheets/d/1NCU6XnJDrVpFkQuoqiyFijf66HozqUNpjLdaL5Hzxtk/gviz/tq?tqx=out:csv&sheet=Model%20Layout%20(%3F)';

        let partnershipsData = [];

        function loadData() {
            const container = document.getElementById('tracker-content');
            container.innerHTML = '<p class="text-center text-slate-500 py-8">Loading partnerships...</p>';

            Papa.parse(SHEET_CSV_URL, {
                download: true,
                header: true,
                skipEmptyLines: 'greedy',
                complete: function(results) {
                    partnershipsData = results.data.filter(row => row.Partnership && row.Partnership.trim() && String(row.Published || '').trim().toLowerCase() === 'yes');
                    renderTracker();
                },
                error: function(err) {
                    console.error('Failed to fetch sheet data:', err);
                    container.innerHTML = '<p class="text-center text-red-500 dark:text-red-400 py-8">Unable to load partnership data. Please try refreshing.</p>';
                }
            });
        }

        function switchView(viewName) {
            document.querySelectorAll('.view-content').forEach(v => v.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('text-primary', 'nav-active');
            });
            
            document.querySelectorAll('.nav-btn-mobile').forEach(btn => {
                btn.classList.remove('text-primary', 'nav-active');
            });
            
            document.getElementById('view-' + viewName).classList.add('active');
            const navBtn = document.getElementById('nav-' + viewName);
            if (navBtn) {
                navBtn.classList.add('text-primary', 'nav-active');
            }
            
            const navBtnMobile = document.querySelector(`.nav-btn-mobile[onclick*="${viewName}"]`);
            if (navBtnMobile) {
                navBtnMobile.classList.add('text-primary', 'nav-active');
            }
            history.replaceState(null, '', '#' + viewName);
        }

        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            const btn = document.getElementById('mobile-menu-btn');
            const icon = btn.querySelector('.material-icons-outlined');
            
            if (menu.classList.contains('hidden')) {
                menu.classList.remove('hidden');
                icon.textContent = 'close';
            } else {
                menu.classList.add('hidden');
                icon.textContent = 'menu';
            }
        }

        function toggleDarkMode() {
            const html = document.documentElement;
            const isDark = html.classList.contains('dark');

            if (isDark) {
                html.classList.remove('dark');
                localStorage.setItem('darkMode', 'false');
            } else {
                html.classList.add('dark');
                localStorage.setItem('darkMode', 'true');
            }
            const simIframe = document.getElementById('sim-iframe');
            if (simIframe && simIframe.contentWindow) {
                simIframe.contentWindow.postMessage({type:'sim-theme', dark: !isDark}, '*');
            }
        }

        // Initialize dark mode on page load
        function initDarkMode() {
            const darkMode = localStorage.getItem('darkMode');
            if (darkMode === 'true' || (!darkMode && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                document.documentElement.classList.add('dark');
            }
        }

        // Call this immediately
        initDarkMode();

        function renderTracker() {
            const container = document.getElementById('tracker-content');
            
            if (!partnershipsData.length) {
                container.innerHTML = '<p class="text-center text-slate-500">No data available</p>';
                return;
            }

            const typeFilter = document.getElementById('typeFilter')?.value || '';
            const searchQuery = document.getElementById('searchInput')?.value.toLowerCase() || '';

            const filtered = partnershipsData.filter(p => {
                const matchesType = !typeFilter || p['Type of Partnership'] === typeFilter;
                const matchesSearch = !searchQuery || 
                    p.Partnership?.toLowerCase().includes(searchQuery) ||
                    (p['Additional Details'] || '').toLowerCase().includes(searchQuery);
                return matchesType && matchesSearch;
            });

            // Sort by partnership type
            const typeOrder = {
                'Operational': 1,
                'Operational/Data': 2,
                'Operational/B2B': 3,
                'Data/Marketing': 4,
                'Data/Marketing/Sponsorship': 5,
                'Data/Integration': 6,
                'Capital/Collaboration': 7,
                'Capital/Marketing': 8,
                'Acquisition': 9,
                'Marketing/Athlete Sponsorship': 10,
                'Government Affairs': 11,
                'Other': 12
            };

            filtered.sort((a, b) => {
                const typeA = a['Type of Partnership'] || 'Other';
                const typeB = b['Type of Partnership'] || 'Other';
                const orderA = typeOrder[typeA] || 99;
                const orderB = typeOrder[typeB] || 99;
                return orderA - orderB;
            });

            let html = '';
            
            filtered.forEach(p => {
                const type = p['Type of Partnership'] || 'Other';
                const typeClass = type.includes('Data') ? 'Data' :
                                 type.includes('Operational') ? 'Operational' :
                                 type.includes('Acquisition') ? 'Acquisition' :
                                 type.includes('Investment') || type.includes('Capital') ? 'Capital' :
                                 type.includes('Government') ? 'Government' :
                                 type === 'Marketing/Athlete Sponsorship' ? 'Marketing' : 'Other';
                
                const badgeColor = 'badge-' + typeClass;
                
                const details = p['Additional Details'] || '';
                const hasRegulatory = !type.includes('Data') && !type.includes('Investment') && !type.includes('Capital') && !type.includes('Government') && (p.IB || p.FCM || p.DCM || p.DCO);
                
                html += `
                    <div class="partnership-card rounded-2xl overflow-hidden shadow-lg">
                        <div class="p-8 pb-6">
                            <div class="flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3 mb-6">
                                <h3 class="text-xl font-bold text-slate-900 dark:text-slate-100 flex-1">${(p.Partnership || 'Untitled Partnership').replace(/\//g, ' <span class="material-icons-outlined text-indigo-400 text-lg mx-1" style="vertical-align: middle;">arrow_forward</span> ')}</h3>
                                <span class="text-xs font-bold px-3 sm:px-4 py-2 rounded-full ${badgeColor} uppercase tracking-wider text-center break-words whitespace-normal sm:whitespace-nowrap inline-block">${type}</span>
                            </div>
                            
                            ${hasRegulatory ? `
                            <div class="regulatory-box mb-6 rounded-xl p-5 border border-slate-200 dark:border-slate-700">
                                <h4 class="reg-label mb-4">Regulatory Structure</h4>
                                <div class="grid grid-cols-2 sm:grid-cols-3 gap-5">
                                    ${p.IB && p.IB !== 'N/A' ? `
                                    <div>
                                        <div class="reg-label mb-2">IB</div>
                                        <div class="text-sm font-semibold text-slate-800 dark:text-slate-100">${p.IB}</div>
                                    </div>
                                    ` : ''}
                                    ${p.FCM && p.FCM !== 'N/A' ? `
                                    <div>
                                        <div class="reg-label mb-2">FCM</div>
                                        <div class="text-sm font-semibold text-slate-800 dark:text-slate-100">${p.FCM}</div>
                                    </div>
                                    ` : ''}
                                    ${p.DCM && p.DCM !== 'N/A' ? `
                                    <div>
                                        <div class="reg-label mb-2">DCM</div>
                                        <div class="text-sm font-semibold text-slate-800 dark:text-slate-100">${p.DCM}</div>
                                    </div>
                                    ` : ''}
                                    ${p.DCO && p.DCO !== 'N/A' ? `
                                    <div>
                                        <div class="reg-label mb-2">DCO</div>
                                        <div class="text-sm font-semibold text-slate-800 dark:text-slate-100">${p.DCO}</div>
                                    </div>
                                    ` : ''}
                                </div>
                            </div>
                            ` : ''}
                            
                            ${details && details.trim() ? `
                            <div class="mb-6">
                                <div class="flex items-start gap-3">
                                    <span class="info-icon material-icons-outlined text-sm mt-0.5 flex-shrink-0">info</span>
                                    <div class="flex-1">
                                        <span class="text-sm font-bold text-slate-700 dark:text-slate-200">Details</span>
                                        <div class="text-sm text-slate-700 dark:text-slate-200 mt-2 leading-relaxed">${(() => {
                                            const items = details.trim().split(/(?:\n|(?<=\S)\s*-\s+(?=[A-Z]))/).map(line => line.trim().replace(/^-\s*/, '')).filter(Boolean);
                                            if (items.length > 1) {
                                                return items.map(item => '<div class="flex items-start gap-2 mt-1"><span class="text-indigo-500 mt-1">•</span><span>' + item + '</span></div>').join('');
                                            } else {
                                                return '<p>' + items[0] + '</p>';
                                            }
                                        })()}</div>
                                    </div>
                                </div>
                            </div>
                            ` : ''}
                        </div>
                        
                        ${p['Announcement Link'] ? `
                        <div class="px-8 pb-6">
                            <a href="${p['Announcement Link']}" target="_blank" class="announcement-link">
                                <span>Announcement</span>
                                <span class="material-icons-outlined">arrow_forward</span>
                            </a>
                        </div>
                        ` : ''}
                    </div>
                `;
            });
            
            container.innerHTML = html || '<p class="text-center text-slate-600 dark:text-slate-200 py-8">No partnerships found</p>';
        }

        function filterPartnerships() {
            renderTracker();
        }

        document.addEventListener('DOMContentLoaded', function() {
            loadData();
            var hash = location.hash.replace('#','');
            var valid = ['terminology','tracker','simulation','about','contact'];
            switchView(valid.indexOf(hash) !== -1 ? hash : 'terminology');
        });
    </script>
</body>
</html>
